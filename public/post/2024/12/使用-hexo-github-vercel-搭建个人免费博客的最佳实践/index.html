<!doctype html>

















































<html
    class="not-ready lg:text-base close"
    style="--bg: #faf8f1"
    lang="zh-CN"
    dir="ltr"
>
    
    
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    
    <title>使用 Hexo&#43;GitHub&#43;Vercel 搭建个人免费博客的最佳实践 - caoyang2002</title>

    
    <meta name="theme-color" />

    
    
    
    
    <meta name="description" content="我的博客之前是在云服务器上部署的java服务，现在把博客迁移到了github托管，使用Hexo以及主题Theme NexT，
在源码仓库通过hexo会生成静态html文件，通过github action部署到网站仓库。网站仓库自动部署到vercel
作为一个把Hexo、NexT官网的文档看了一个遍的人，我想我可以写一篇文章总结一下。" />
    <meta name="author" content="Cyrus" />
    

    
    
    
    
    
    
    <link rel="preload stylesheet" as="style" href="http://localhost:1313/main.min.css" />

    
    
    
    
    
    <link rel="preload" as="image" href="http://localhost:1313/theme.png" />

    
    
    
    
    <link rel="preload" as="image" href="https://www.gravatar.com/avatar/d0bdfd42ef81555f2c2372b61609c73d?s=160&amp;d=identicon" />
    
    

    
    
    <link rel="preload" as="image" href="http://localhost:1313/twitter.svg" />
    
    <link rel="preload" as="image" href="http://localhost:1313/github.svg" />
    
    <link rel="preload" as="image" href="http://localhost:1313/instagram.svg" />
    
    <link rel="preload" as="image" href="http://localhost:1313/rss.svg" />
    
    

    
    
    <script
        defer
        src="http://localhost:1313/highlight.min.js"
        onload="hljs.initHighlightingOnLoad();"
    ></script>
    

    
    
    
    
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css"
  integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI"
  crossorigin="anonymous"
/>
<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js"
  integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t"
  crossorigin="anonymous"
></script>
<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js"
  integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
  crossorigin="anonymous"
></script>


<script>
  document.addEventListener('DOMContentLoaded', () =>
    renderMathInElement(document.body, {
      
      
      delimiters: [
        { left: '$$', right: '$$', display: true },
        { left: '$', right: '$', display: false },
      ],
      
      throwOnError: false,
    }),
  );
</script>

    
    
    

    
    <link
        rel="icon"
        href="http://localhost:1313/favicon.ico"
    />
    <link
        rel="apple-touch-icon"
        href="http://localhost:1313/apple-touch-icon.png"
    />

    
    <meta name="generator" content="Hugo 0.140.0">

    
    
    
</head>


    <body class="text-black duration-200 ease-out dark:text-white">
        <header class="mx-auto flex h-[4.5rem] px-8 lg:justify-center">
    
    <div
        class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center max-w-[--w]"
    >
        <a
            class="-translate-y-[1px] text-2xl font-medium"
            href="http://localhost:1313/"
            >caoyang2002</a
        >
        <div
            class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
            role="button"
            aria-label="Dark"
        ></div>
    </div>

    <div
        class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
        role="button"
        aria-label="Menu"
    ></div>

    

    <script>
        
        const htmlClass = document.documentElement.classList;
        setTimeout(() => {
            htmlClass.remove("not-ready");
        }, 10);

        
        const btnMenu = document.querySelector(".btn-menu");
        btnMenu.addEventListener("click", () => {
            if (htmlClass.contains("open")) {
                htmlClass.remove("open");
                htmlClass.add("close");
            } else {
                htmlClass.remove("close");
                htmlClass.add("open");
            }
        });

        
        const metaTheme = document.querySelector('meta[name="theme-color"]');
        const lightBg = "#faf8f1".replace(/"/g, "");
        const setDark = (isDark) => {
            metaTheme.setAttribute("content", isDark ? "#000" : lightBg);
            htmlClass[isDark ? "add" : "remove"]("dark");
            localStorage.setItem("dark", isDark);
        };

        
        const darkScheme = window.matchMedia("(prefers-color-scheme: dark)");
        if (htmlClass.contains("dark")) {
            setDark(true);
        } else {
            const darkVal = localStorage.getItem("dark");
            setDark(darkVal ? darkVal === "true" : darkScheme.matches);
        }

        
        darkScheme.addEventListener("change", (event) => {
            setDark(event.matches);
        });

        
        const btnDark = document.querySelector(".btn-dark");
        btnDark.addEventListener("click", () => {
            setDark(localStorage.getItem("dark") !== "true");
        });
    </script>

    
    <div
        class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
    >
        
        
        <nav
            class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse"
        >
            
            <a
                class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
                href="/about/"
                >关于</a
            >
            
            <a
                class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
                href="/contact/"
                >联系</a
            >
            
        </nav>
        

        
        <nav
            class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"
        >
            
            <a
                class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
                style="--url: url(./twitter.svg)"
                href="https://twitter.com/caoyang2002"
                target="_blank"
                rel="me"
            >
                twitter
            </a>
            
            <a
                class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
                style="--url: url(./github.svg)"
                href="https://github.com/caoyang2002"
                target="_blank"
                rel="me"
            >
                github
            </a>
            
            <a
                class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
                style="--url: url(./instagram.svg)"
                href="https://instagram.com/caoyang2002"
                target="_blank"
                rel="me"
            >
                instagram
            </a>
            
            <a
                class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
                style="--url: url(./rss.svg)"
                href="http://localhost:1313/index.xml"
                target="_blank"
                rel="alternate"
            >
                rss
            </a>
            
        </nav>
        
    </div>
</header>

<style>
    header {
        position: fixed;
        top: 0;
        left: 0;  
        right: 0;  
        z-index: 50;
        width: 100vw;  
        text-align: center;

         
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        background: rgba(255, 255, 255, 0.5);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }
</style>


        <div class="relative flex justify-start max-w-[90vw] px-8">
            <main
                class="prose prose-neutral flex-1 min-h-[calc(100vh-9rem)] pt-14 pb-16 dark:prose-invert text-left"
            >
                


<article class="text-left">
    
    <div class="mb-14 mt-8">
        <h1 class="!my-0 pb-2.5">使用 Hexo&#43;GitHub&#43;Vercel 搭建个人免费博客的最佳实践</h1>

        
        <div class="text-xs antialiased opacity-60">
            
            <time>2024年12月22日</time>
            
            
            
            
        </div>
        
    </div>

    <section><p>我的博客之前是在云服务器上部署的java服务，现在把博客迁移到了github托管，使用<a href="https://hexo.io/">Hexo</a>以及主题<a href="https://theme-next.js.org/">Theme NexT</a>，
在源码仓库通过hexo会生成静态html文件，通过github action部署到网站仓库。网站仓库自动部署到<a href="https://vercel.com/">vercel</a></p>
<p>作为一个把Hexo、NexT官网的文档看了一个遍的人，我想我可以写一篇文章总结一下。</p>
<h1 id="名词解释">名词解释</h1>
<table>
  <thead>
      <tr>
          <th>名词</th>
          <th>说明</th>
          <th>网址</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>hexo</td>
          <td>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</td>
          <td><a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></td>
      </tr>
      <tr>
          <td>Next</td>
          <td>NexT是Hexo的高品质优雅主题</td>
          <td><a href="https://theme-next.js.org/">https://theme-next.js.org/</a></td>
      </tr>
      <tr>
          <td>vercel</td>
          <td>Vercel 是一个面向开发人员的平台，它提供了更快地构建和部署 Web 应用程序所需的工具、工作流和基础架构，而无需进行其他配置。Vercel 开箱即用地支持流行的前端框架，其可扩展的安全基础架构遍布全球，可从用户附近的数据中心提供内容，以实现最佳速度。</td>
          <td><a href="https://vercel.com/">https://vercel.com/</a></td>
      </tr>
      <tr>
          <td>github pages</td>
          <td>github官方的，直接用github仓库生成静态网站。但是速度比较慢，建议使用支持cdn的托管平台，例如vercel</td>
          <td><a href="https://pages.github.com/">https://pages.github.com/</a></td>
      </tr>
      <tr>
          <td>github actions</td>
          <td>亦称为workflows。工作流是将运行一个或多个作业的可配置自动化过程。工作流由签入到存储库的 YAML 文件定义，并在存储库中的事件触发时运行，也可以手动触发或按定义的计划触发。工作流在存储库的 .github/workflows 目录中定义，一个存储库可以有多个工作流，每个工作流可以执行一组不同的任务。例如，您可以有一个工作流来构建和测试拉取请求，另一个工作流在每次创建发布时部署应用程序，还有另一个工作流在每次有人打开新问题时添加标签。</td>
          <td><a href="https://docs.github.com/en/actions/using-workflows/about-workflows">https://docs.github.com/en/actions/using-workflows/about-workflows</a></td>
      </tr>
  </tbody>
</table>
<h1 id="安装并使用hexo">安装并使用hexo</h1>
<p>首先安装<a href="http://nodejs.org/">nodejs</a></p>
<h2 id="安装-hexo">安装 Hexo</h2>
<p>所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。</p>
<pre tabindex="0"><code>npm install -g hexo-cli
</code></pre><p>安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。</p>
<pre tabindex="0"><code>hexo init &lt;folder&gt;
cd &lt;folder&gt;
npm install
</code></pre><p>新建完成后，指定文件夹的目录如下：.</p>
<pre tabindex="0"><code>.
├── _config.yml
├── package.json
├── scaffolds
├── source
|   ├── _drafts
|   └── _posts
└── themes
</code></pre><h3 id="_configyml">_config.yml</h3>
<p>网站的 <a href="https://hexo.io/zh-cn/docs/configuration">配置</a> 信息，您可以在此配置大部分的参数。</p>
<h3 id="source">source</h3>
<p>资源文件夹是存放用户资源的地方。除 <code>_posts</code> 文件夹之外，开头命名为 <code>_</code> (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 <code>public</code> 文件夹，而其他文件会被拷贝过去。</p>
<h3 id="themes">themes</h3>
<p><a href="https://hexo.io/zh-cn/docs/themes">主题</a> 文件夹。Hexo 会根据主题来生成静态页面。</p>
<h2 id="写文章">写文章</h2>
<pre tabindex="0"><code>hexo new &#34;My New Post&#34;
</code></pre><p>hexo new会在<code>source/_posts</code>文件夹中创建一个名为<code>My-New-Post.md</code>的新文件，—和—之间是meta元信息，有标题、创建时间、标签等。在其后使用markdown语法写文章。</p>
<p>更多信息介绍: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h2 id="运行hexo">运行hexo</h2>
<pre tabindex="0"><code>hexo generate
hexo server
</code></pre><p>hexo generate会通过源码生成静态Html文件，hexo server会在本地开启服务器，默认url是<code>http://localhost:4000/</code>.</p>
<p>也可以简写为：</p>
<pre tabindex="0"><code>hexo g
hexo s
</code></pre><h1 id="安装next主题">安装NexT主题</h1>
<p>打开终端，切换到 Hexo 站点根目录并安装 NexT 主题</p>
<pre tabindex="0"><code>cd hexo-site
npm install hexo-theme-next
</code></pre><h2 id="启用next主题配置文件">启用NexT主题配置文件</h2>
<p><a href="https://theme-next.js.org/docs/getting-started/">NexT官方教程</a>中给出的2个方式都不是太好，有缺陷。官方教程是修改themes/next/_config.yml或者node_modules/hexo-theme-next/_config.yml，这种方式不利于将来升级NexT，最新的最佳实践是创建<code>_config.next.yml</code>文件，和<code>_config.yml</code>同级。这一点可以查看[hexo的官方文档](<a href="https://hexo.io/docs/configuration.html#Using-an-Alternate-Config">Configuration | Hexo</a>), 从Hexo 5.0.0版本开始支持。</p>
<p>创建完<code>_config.next.yml</code>文件后，把<code>_config.yml</code>中theme值改为next即可启用</p>
<pre tabindex="0"><code># Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
theme: next
</code></pre><h2 id="next主题重要配置">Next主题重要配置</h2>
<p>scheme 建议使用Gemini，NexT官方网站就是使用的Gemini</p>
<pre tabindex="0"><code>#scheme: Muse
#scheme: Mist
#scheme: Pisces
scheme: Gemini
</code></pre><h3 id="开启搜索">开启搜索</h3>
<p>安装[搜索插件](<a href="https://github.com/next-theme/hexo-generator-searchdb">GitHub - next-theme/hexo-generator-searchdb: 🔍 Seach data generator plugin for Hexo.</a>)</p>
<pre tabindex="0"><code>npm install hexo-generator-searchdb
</code></pre><p>Hexo config file <code>_config.yml</code></p>
<pre tabindex="0"><code>search:
 path: search.xml
 field: post
 content: true
 format: html
</code></pre><p>NexT config file <code>_config.next.yml</code></p>
<pre tabindex="0"><code># Local search
# Dependencies: https://github.com/next-theme/hexo-generator-searchdb
local_search:
  enable: true
  # If auto, trigger search by changing input.
  # If manual, trigger search by pressing enter key or search button.
  trigger: auto
  # Show top n results per article, show all results by setting to -1
  top_n_per_article: 1
  # Unescape html strings to the readable one.
  unescape: false
  # Preload the search data when the page loads.
  preload: false
</code></pre><h3 id="开启评论">开启评论</h3>
<p>hexo支持很多评论系统，例如disqus、disqusjs、changyan、livere、gitalk、utterances、isso等，我基本上都测试了一遍。changyan是国产的，有一些特色功能，例如支持评论先审后发；gittalk、utterances等是基于github issues的；giscus是基于github discussions的，支持楼中楼。</p>
<table>
  <thead>
      <tr>
          <th>名称</th>
          <th>说明</th>
          <th>官网</th>
          <th>评价</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>disqus</td>
          <td>Disqus 是一种美国博客评论托管服务，适用于使用网络平台的网站和在线社区。</td>
          <td><a href="https://disqus.com/">https://disqus.com</a></td>
          <td>官网不开代理打不开</td>
      </tr>
      <tr>
          <td>disqusjs</td>
          <td>基于Disqus，DisqusJS 提供一个纯前端的、不依赖后端服务器的 Disqus 评论基础模式。</td>
          <td><a href="https://disqusjs.skk.moe/">https://disqusjs.skk.moe/</a></td>
          <td>同上，不能用</td>
      </tr>
      <tr>
          <td>changyan</td>
          <td>畅言云评，国内的</td>
          <td><a href="https://changyan.kuaizhan.com/">https://changyan.kuaizhan.com</a></td>
          <td>可以用，支持先审后发。但是评论需要登录到畅言云评账号</td>
      </tr>
      <tr>
          <td>gitalk</td>
          <td>基于github issues</td>
          <td><a href="https://gitalk.github.io/">https://gitalk.github.io/</a></td>
          <td>不推荐，需要的权限太高，配置也太复杂，我搞了一天也没有完全成功。作者也很久不维护了。评论时需要登录github</td>
      </tr>
      <tr>
          <td>utterances</td>
          <td>基于github issues，gitalk的完全替代者。</td>
          <td><a href="https://utteranc.es/">https://utteranc.es/</a></td>
          <td>推荐，可以只给评论的存储仓库开权限，几分钟就成功了，配置简单。评论时需要登录github</td>
      </tr>
      <tr>
          <td>giscus</td>
          <td>基于github discussions，本项目深受 utterances 的启发。</td>
          <td><a href="https://giscus.app/zh-CN">https://giscus.app/zh-CN</a></td>
          <td>推荐，和utterances很像，没有授权问题，配置简单。基于discussions，支持楼中楼，评论时需要登录github。本博客使用的是giscus评论系统。</td>
      </tr>
      <tr>
          <td>valine</td>
          <td>基于LeanCloud</td>
          <td><a href="https://valine.js.org/">https://valine.js.org/</a></td>
          <td>推荐，无需登录，支持匿名评论</td>
      </tr>
  </tbody>
</table>
<p>如果要使用giscus，需要先在源代码项目安装[hexo giscus插件](<a href="https://github.com/next-theme/hexo-next-giscus">GitHub - next-theme/hexo-next-giscus: Giscus comment system for NexT</a>) :</p>
<pre tabindex="0"><code>npm install hexo-next-giscus
</code></pre><p>其次创建一个自己名下用来存储的公开仓库，然后打开<a href="https://giscus.app/zh-CN">giscus</a> 填写相关信息，即可自动生成giscus配置。</p>
<pre tabindex="0"><code>giscus:
  enable: true
  repo:  #需要修改成自己的公开仓库
  repo_id: 需要修改成自己的
  category: General
  category_id: 需要修改成自己的
  # Available values: pathname | url | title | og:title
  mapping: pathname
  # Available values: 0 | 1
  reactions_enabled: 1
  # Available values: 0 | 1
  emit_metadata: 1
  # Available values: light | dark | dark_high_contrast | transparent_dark | preferred-color-scheme
  theme: preferred_color_scheme
  # Available values: en | zh-CN
  lang: en
  # Place the comment box above the comments
  input_position: top
  # Load the comments lazily
  loading: lazy
</code></pre><p>其他的设置都比较简单，可以自行参考<a href="https://theme-next.js.org/docs/theme-settings/">NexT官方文档</a>。</p>
<h3 id="开启文章底部分享">开启文章底部分享</h3>
<pre tabindex="0"><code>_config.next.yml
addtoany:
  enable: true
  buttons:
    - facebook
    - twitter
    - telegram
    - wechat
    - qzone
    - sina_weibo
</code></pre><h3 id="开启文章字数计数">开启文章字数计数</h3>
<p>详见<a href="https://theme-next.js.org/docs/theme-settings/posts.html?highlight=hexo+word+counter">hexo+word+counter</a></p>
<p>安装</p>
<pre tabindex="0"><code>npm install hexo-word-counter
</code></pre><p><code>_config.next.yml</code>配置</p>
<pre tabindex="0"><code># Post wordcount display settings
# Dependencies: https://github.com/next-theme/hexo-word-counter
symbols_count_time:
  separated_meta: true
  item_text_total: true
</code></pre><h3 id="标签词云">标签词云</h3>
<p><img src="https://github.com/D0n9X1n/hexo-tag-cloud/raw/master/img/example.png" alt="TagCloud">标签词云的github地址为<a href="https://github.com/D0n9X1n/hexo-tag-cloud">hexo-tag-cloud</a></p>
<p>安装</p>
<pre tabindex="0"><code>npm install hexo-tag-cloud
</code></pre><p><code>_config.next.yml</code>配置</p>
<pre tabindex="0"><code># hexo-tag-cloud
tag_cloud:
  textFont: Trebuchet MS, Helvetica
  textColor: &#39;#333&#39;
  textHeight: 25
  outlineColor: &#39;#E2E1D1&#39;
  maxSpeed: 0.1
</code></pre><h3 id="处理图片链接">处理图片链接</h3>
<p>在使用MarkText等软件编辑md文件上传图片时，生成的路径和hexo路径不匹配。可以使用hexo-image-link插件解决。参考：
<a href="https://github.com/cocowool/hexo-image-link">https://github.com/cocowool/hexo-image-link</a></p>
<h3 id="next其他插件">NexT其他插件</h3>
<p>其他还有数学公式支持、基于LeanCloud的网站访客统计等功能，可参考官方教程</p>
<p><a href="https://theme-next.js.org/plugins">https://theme-next.js.org/plugins</a></p>
<p><a href="https://theme-next.js.org/docs/third-party-services/">https://theme-next.js.org/docs/third-party-services/</a></p>
<h1 id="部署流程">部署流程</h1>
<p><code>npm install -g hexo-cli</code> 再<code>hexo init</code>之后，会生成一个nodejs项目，hexo new会在source 文件夹中生成新的markdown文件。这个项目有_config.yml、package.json、.gitignore等文件，可以把这个项目称之为“源代码”项目。源代码项目是私有的。</p>
<p>然后生成的html静态网站，应该搞一个单独的html项目，例如项目名叫<code>chunqiujinjing.github.io</code>。</p>
<p>hexo new 新文章编辑好之后，就可以把“源代码”项目commit+push到git上面了。最后运行一下hexo g + hexo d可以部署到html项目中。</p>
<p>其实html项目也可以是私有的，只不过想使用github pages必须命名为<code>chunqiujinjing.github.io</code>并且公有才行。其实就算随便取名字，设置为私有，也可以自己部署到任意地方。</p>
<p>如果想做到commit+push源代码之后自动部署html项目，可以使用github actions。</p>
<h2 id="github-actions">github actions</h2>
<p>在[hexo的github-pages文档](<a href="https://hexo.io/docs/github-pages.html">GitHub Pages | Hexo</a>) 中有一个github actions的示例，但是其中配置的做法并不科学。它把源代码项目和html项目放到了一个仓库中，用不同的分支来区分，然后还部署到了github pages，github pages必须使用公开仓库。这就导致了网站的源代码和html代码都暴露了，你的所有配置将被一览无余：例如leancloud的appkey、giscus的id等等。</p>
<p>最佳实践是源代码仓库设置为私有，通过hexo deploy（或者由github action自动化）部署到html仓库。html仓库如果使用github pages部署，必须设置为公开，但通过vercel或者其他托管网站部署则可以设置为私有。</p>
<h3 id="最佳实践">最佳实践</h3>
<p>1 修改源代码仓库：</p>
<pre tabindex="0"><code>_config.yml
# Deployment
## Docs: https://hexo.io/docs/one-command-deployment
deploy:
  type: git
  repo: git@github.com:你的用户名/你的html仓库
  branch: main
</code></pre><p>2 添加<code>github actions</code></p>
<p>可以参考<a href="https://github.com/sma11black/hexo-action">hexo-action</a> 来设置。</p>
<p>2.1 设置 <code>Deploy keys</code> 和 <code>Secrets</code></p>
<p>2.1.1 运行<code>ssh-keygen -t rsa -C &quot;username@example.com&quot;</code> (替换为你的邮箱) ，会生成一个文件，里面有公钥和私钥。</p>
<p>2.1.2 在 Github html存储库中：在 <code>Settings &gt; Deploy Keys</code> 添加公钥。</p>
<p>2.1.3 在 hexo 源代码存储库中：在 <code>Settings &gt; Secrets</code> 菜单中添加私钥。</p>
<p><img src="https://www.chunqiujinjing.com/2023/06/18/hexo-hello-world/chunqiujinjing.png" alt="img">
<img src="https://www.chunqiujinjing.com/2023/06/18/hexo-hello-world/chunqiujinjing_source.png" alt="img"></p>
<p>2.2 创建<code>github/workflows/deploy.yml</code> 文件，</p>
<pre tabindex="0"><code>name: Deploy

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    name: A job to deploy blog.
    steps:
    - name: Checkout
      uses: actions/checkout@v1
      with:
        submodules: true # Checkout private submodules(themes or something else).

    # Caching dependencies to speed up workflows. (GitHub will remove any cache entries that have not been accessed in over 7 days.)
    - name: Cache node modules
      uses: actions/cache@v1
      id: cache
      with:
        path: node_modules
        key: ${{ runner.os }}-node-${{ hashFiles(&#39;**/package-lock.json&#39;) }}
        restore-keys: |
          ${{ runner.os }}-node-
    - name: Install Dependencies
      if: steps.cache.outputs.cache-hit != &#39;true&#39;
      run: npm ci

    # Deploy hexo blog website.
    - name: Deploy
      id: deploy
      uses: sma11black/hexo-action@v1.0.3
      with:
        deploy_key: ${{ secrets.DEPLOY_KEY }}
#        user_name: your github username  # (or delete this input setting to use bot account)
#        user_email: your github useremail  # (or delete this input setting to use bot account)
        commit_msg: ${{ github.event.head_commit.message }}  # (or delete this input setting to use hexo default settings)
    # Use the output from the `deploy` step(use for test action)
    - name: Get the output
      run: |
        echo &#34;${{ steps.deploy.outputs.notify }}&#34;
</code></pre><p>这样设置完之后，在hexo源代码仓库，创建或者修改完文章，只需要git commit、git push，就会自动触发github actions，完成部署代码到html仓库。</p>
<p>当然也可以不设置github actions，就需要自己手动<code>hexo generate</code> <code>hexo deploy</code>了。</p>
<h2 id="部署到vercel">部署到vercel</h2>
<p>打开<a href="https://vercel.com/">vercel官网</a>，注册并登录，关联github账号，新建项目，选择html项目（注意不是源码项目）即可一键部署到vercel。</p>
<h2 id="绑定域名">绑定域名</h2>
<p>vercel分配的域名在大部分地区是被阻断的，可以绑定自己的域名。操作方法可以参考：<a href="https://github.com/gaboolic/vercel-reverse-proxy">GitHub - gaboolic/vercel-reverse-proxy</a></p>
</section>

    
    

    
    
    
    
    <nav
        class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
    >
        
        <a class="ltr:pr-3 rtl:pl-3" href="http://localhost:1313/post/2024/12/%E4%BB%8E-hexo-%E8%BF%81%E7%A7%BB%E8%87%B3-hugo/"
            ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span
            ><span>从 Hexo 迁移至 Hugo</span></a
        >
        
        
        <a
            class="ltr:ml-auto rtl:mr-auto justify-end pl-3"
            href="http://localhost:1313/post/2023/03/post-3/"
            ><span>Post 3</span
            ><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
        >
        
    </nav>
    
    

    
    
    <div class="mt-24 w-100rem" id="disqus_thread"></div>
    <script>
        const disqusShortname = "caoyang2002.xyz";
        const script = document.createElement("script");
        script.src = "https://" + disqusShortname + ".disqus.com/embed.js";
        script.setAttribute("data-timestamp", +new Date());
        document.head.appendChild(script);
    </script>
    

    
    

    


    
    <div class="giscus mt-24"></div>
    <script
        src="https://giscus.app/client.js"
        data-repo="caoyang2002/caoyang2002"
        data-repo-id="R_kgDONgnnzg"
        data-category="Announcements"
        data-category-id="DIC_kwDONgnnzs4ClayH"
        data-mapping="pathname"
        data-strict="1"
        data-reactions-enabled="0"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async
    ></script>
    
</article>


            </main>

            <div class="hidden lg:block ml-8">
                  <aside class="sticky top-24 w-64">
  
  
  
  <div class="not-prose sticky top-24 rounded-lg bg-white dark:bg-neutral-800 p-6 shadow-sm">
    <h3 class="mb-4 text-lg font-semibold bg-gradient-to-r from-neutral-800 to-neutral-600 dark:from-neutral-200 dark:to-neutral-400 bg-clip-text text-transparent">
      目录
    </h3>
    <nav id="TableOfContents" class="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#名词解释">名词解释</a></li>
    <li><a href="#安装并使用hexo">安装并使用hexo</a>
      <ul>
        <li><a href="#安装-hexo">安装 Hexo</a>
          <ul>
            <li><a href="#_configyml">_config.yml</a></li>
            <li><a href="#source">source</a></li>
            <li><a href="#themes">themes</a></li>
          </ul>
        </li>
        <li><a href="#写文章">写文章</a></li>
        <li><a href="#运行hexo">运行hexo</a></li>
      </ul>
    </li>
    <li><a href="#安装next主题">安装NexT主题</a>
      <ul>
        <li><a href="#启用next主题配置文件">启用NexT主题配置文件</a></li>
        <li><a href="#next主题重要配置">Next主题重要配置</a>
          <ul>
            <li><a href="#开启搜索">开启搜索</a></li>
            <li><a href="#开启评论">开启评论</a></li>
            <li><a href="#开启文章底部分享">开启文章底部分享</a></li>
            <li><a href="#开启文章字数计数">开启文章字数计数</a></li>
            <li><a href="#标签词云">标签词云</a></li>
            <li><a href="#处理图片链接">处理图片链接</a></li>
            <li><a href="#next其他插件">NexT其他插件</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#部署流程">部署流程</a>
      <ul>
        <li><a href="#github-actions">github actions</a>
          <ul>
            <li><a href="#最佳实践">最佳实践</a></li>
          </ul>
        </li>
        <li><a href="#部署到vercel">部署到vercel</a></li>
        <li><a href="#绑定域名">绑定域名</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </nav>
  </div>
  
  
</aside>

<style>
 
aside {
  position: fixed;   
  top: 96px;        
  right: 0rem;
  width: 14rem;
  height: calc(100vh - 96px);  
  overflow-y: auto;
  z-index: 40;      
}

 
.toc-container {
  background: white;
  border-radius: 0.5rem;
  padding: 0.5rem;
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
}

 
@media (prefers-color-scheme: dark) {
  .toc-container {
    background: rgb(38 38 38);
  }
}

 
.toc {
  max-height: calc(100vh - 180px);  
  overflow-y: auto;
  scrollbar-gutter: stable;
}

 
.toc::-webkit-scrollbar {
  width: 4px;
}

.toc::-webkit-scrollbar-track {
  background: transparent;
}

.toc::-webkit-scrollbar-thumb {
  background-color: #d1d1d1;
  border-radius: 4px;
}

 
.toc ul {
  list-style: none;
  padding-left: 1rem;
}

.toc li {
  margin: 0.5rem 0;
}

.toc a {
  display: block;
  padding: 0.25rem 0.5rem;
  color: #4b5563;
  text-decoration: none;
  border-radius: 0.25rem;
  transition: all 0.2s;
}

.toc a:hover {
  background-color: #f3f4f6;
  color: #111827;
}

.toc a.active {
  background-color: #f3f4f6;
  color: #111827;
  font-weight: 500;
}

 
@media (max-width: 768px) {
  aside {
    display: none;  
  }
}

 
@media (prefers-color-scheme: dark) {
  .toc a {
    color: #9ca3af;
  }

  .toc a:hover,
  .toc a.active {
    background-color: #262626;
    color: #e5e7eb;
  }

  .toc::-webkit-scrollbar-thumb {
    background-color: #404040;
  }
}
h1, h2, h3, h4, h5, h6 {
  scroll-margin-top: 100px;  
}
</style>

<script>

document.addEventListener('DOMContentLoaded', () => {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const id = entry.target.getAttribute('id');
      const tocLink = document.querySelector(`.toc a[href="#${id}"]`);

      if (entry.intersectionRatio > 0) {
        document.querySelectorAll('.toc a.active').forEach(node => {
          node.classList.remove('active');
        });
        tocLink?.classList.add('active');
      }
    });
  }, {
    rootMargin: '-20% 0px -80% 0px'
  });

  
  document.querySelectorAll('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').forEach(heading => {
    observer.observe(heading);
  });
});

  
  let touchStartX = 0;
  let touchEndX = 0;

  document.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
  }, false);

  document.addEventListener('touchend', e => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
  }, false);

  function handleSwipe() {
    const aside = document.querySelector('aside');
    const swipeLength = touchEndX - touchStartX;

    if (Math.abs(swipeLength) > 50) {
      if (swipeLength < 0) {
        aside?.classList.add('show');
      } else {
        aside?.classList.remove('show');
      }
    }
  }
});
</script>

            </div>
        </div>
        <footer class="flex items-center text-xs uppercase">
    <div class="mr-auto opacity-60">
         &copy; 2025
        <a class="link" href="http://localhost:1313/">caoyang2002</a>
        
    </div>

    <a
        class="link mx-6 opacity-60"
        href="https://gohugo.io/"
        rel="noopener"
        target="_blank"
        >powered by hugo️️</a
    >️
    <a
        class="link mx-6 opacity-60"
        href="https://github.com/nanxiaobei/hugo-paper"
        rel="noopener"
        target="_blank"
        >hugo-paper</a
    >
    <a
        class="link opacity-60"
        href="https://github.com/caoyang2002/hugo-focus"
        rel="noopener"
        target="_blank"
        >hugo-focus</a
    >
</footer>

<style>
    footer {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 50;
        width: 100%;

        padding: 0.5rem;
        padding-bottom: calc(0.5rem + var(--safe-padding-bottom));
        padding-left: max(0.5rem, var(--safe-padding-left));
        padding-right: max(0.5rem, var(--safe-padding-right));

        display: flex;
        justify-content: center;
        align-items: center;

        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(12px);
        background: rgba(255, 255, 255, 0.85);
        border-top: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.05);
    }

     
    .dark footer {
        background: rgba(0, 0, 0, 0.85);
        border-top-color: rgba(255, 255, 255, 0.1);
    }

     
    .footer-content {
        width: 100%;
        max-width: var(--w);
        margin: 0 auto;
        padding: 0 1rem;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
    }

     
    .footer-element {
        padding: 0.75rem 1.5rem;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        opacity: 0.8;
        border-radius: 0.5rem;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        transition: all 0.2s ease;
    }

    .footer-element:hover {
        opacity: 1;
        background: rgba(255, 255, 255, 0.2);
    }

    .dark .footer-element {
        background: rgba(255, 255, 255, 0.05);
    }

    .dark .footer-element:hover {
        background: rgba(255, 255, 255, 0.1);
    }

     
    @media (max-width: 768px) {
        footer {
            padding-top: 0.5rem;
            padding-bottom: calc(0.5rem + env(safe-area-inset-bottom));
        }

        .footer-content {
            padding: 0 0.5rem;
            gap: 0.5rem;
        }

        .footer-element {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
        }
    }

    @media (min-width: 768px) {
        .footer-element {
            font-size: 0.875rem;
        }
    }

    @media (min-width: 1024px) {
        .footer-content {
            padding: 0 2rem;
            gap: 2rem;
        }

        .footer-element {
            padding: 0.75rem 2rem;
        }
    }
</style>

    </body>
</html>
