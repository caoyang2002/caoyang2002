<!doctype html><html class="not-ready lg:text-base close" style=--bg:#faf8f1 lang=zh-CN dir=ltr><style>body{min-height:100vh;background-color:var(--bg);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent}</style><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Quartz 教程 - caoyang 2002</title>
<meta name=theme-color><meta name=description content="


   原作者
   
     ↗
   




   个人配置
   
     ↗
   



下载









    git clone https://github.com/caoyang2002/quartz-obsidian-webside.git
cd quartz-obsidian-webside
npm i
npx quartz build --serve


配置
布局
某些 emitters 可能还会输出HTML文件。为了方便定制，这些 emitters 允许您完全重新排列页面的布局。
默认页面布局可以在 quartz.layout.ts 中找到。
每个页面由多个不同的部分组成，这些部分包含 QuartzComponents。以下代码片段列出了您可以向其中添加组件的所有有效部分："><meta name=author content="曹洋 simons"><link rel="preload stylesheet" as=style href=https://caoyang2002.xyz/main.min.css><link rel=preload as=image href=https://caoyang2002.xyz/theme.png><link rel=preload as=image href=/about/avatar.jpg><link rel=preload as=image href=https://caoyang2002.xyz/twitter.svg><link rel=preload as=image href=https://caoyang2002.xyz/github.svg><link rel=preload as=image href=https://caoyang2002.xyz/instagram.svg><link rel=preload as=image href=https://caoyang2002.xyz/rss.svg><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css><script defer src=https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js></script><script defer src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js onload=hljs.initHighlightingOnLoad()></script><script defer src=https://caoyang2002.xyz/highlight.min.js onload=hljs.initHighlightingOnLoad()></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",()=>renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1}))</script><link rel=icon href=https://caoyang2002.xyz/favicon.ico><link rel=apple-touch-icon href=https://caoyang2002.xyz/apple-touch-icon.png><meta name=generator content="Hugo 0.140.2"><meta itemprop=name content="Quartz 教程"><meta itemprop=description content="原作者 ↗ 个人配置 ↗ 下载 git clone https://github.com/caoyang2002/quartz-obsidian-webside.git cd quartz-obsidian-webside npm i npx quartz build --serve 配置 布局 某些 emitters 可能还会输出HTML文件。为了方便定制，这些 emitters 允许您完全重新排列页面的布局。 默认页面布局可以在 quartz.layout.ts 中找到。
每个页面由多个不同的部分组成，这些部分包含 QuartzComponents。以下代码片段列出了您可以向其中添加组件的所有有效部分："><meta itemprop=datePublished content="2024-02-29T09:31:37+08:00"><meta itemprop=dateModified content="2025-01-22T22:41:30+08:00"><meta itemprop=wordCount content="9586"><meta itemprop=keywords content="编程,Quartz"><meta property="og:url" content="https://caoyang2002.xyz/post/2024/02/quartz/"><meta property="og:site_name" content="caoyang 2002"><meta property="og:title" content="Quartz 教程"><meta property="og:description" content="原作者 ↗ 个人配置 ↗ 下载 git clone https://github.com/caoyang2002/quartz-obsidian-webside.git cd quartz-obsidian-webside npm i npx quartz build --serve 配置 布局 某些 emitters 可能还会输出HTML文件。为了方便定制，这些 emitters 允许您完全重新排列页面的布局。 默认页面布局可以在 quartz.layout.ts 中找到。
每个页面由多个不同的部分组成，这些部分包含 QuartzComponents。以下代码片段列出了您可以向其中添加组件的所有有效部分："><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-29T09:31:37+08:00"><meta property="article:modified_time" content="2025-01-22T22:41:30+08:00"><meta property="article:tag" content="编程"><meta property="article:tag" content="Quartz"><meta name=twitter:card content="summary"><meta name=twitter:title content="Quartz 教程"><meta name=twitter:description content="原作者 ↗ 个人配置 ↗ 下载 git clone https://github.com/caoyang2002/quartz-obsidian-webside.git cd quartz-obsidian-webside npm i npx quartz build --serve 配置 布局 某些 emitters 可能还会输出HTML文件。为了方便定制，这些 emitters 允许您完全重新排列页面的布局。 默认页面布局可以在 quartz.layout.ts 中找到。
每个页面由多个不同的部分组成，这些部分包含 QuartzComponents。以下代码片段列出了您可以向其中添加组件的所有有效部分："><link rel=canonical href=https://caoyang2002.xyz/post/2024/02/quartz/></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-12 px-8 lg:justify-center"><div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center max-w-[--w]"><a class="-translate-y-[1px] text-2xl font-medium" href=https://caoyang2002.xyz/>caoyang 2002</a><div class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.contains("open")?(htmlClass.remove("open"),htmlClass.add("close")):(htmlClass.remove("close"),htmlClass.add("open"))});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#faf8f1".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-0 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse"><a class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal header-menu" href=/>首页
</a><a class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal header-menu" href=/about/>关于
</a><a class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal header-menu" href=/contact/>联系
</a><a class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal header-menu" href=/guestbook/>留言
</a><a class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal header-menu" href=/search/>搜索</a><div class=language-selector><div class="inline-block text-left dropdown"><div><p class=selected-language>Chinese</p></div><div style=background-color:red;z-index:1000><ul class=dropdown-menu id=dropdownMenu><li><a href=/en/post/2024/02/quartz/ class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900" role=menuitem>English</a></li><li><a href=/es/post/2024/02/quartz/ class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900" role=menuitem>Español</a></li></ul></div></div><script>const dropdownButton=document.getElementById("dropdownButton"),dropdownMenu=document.getElementById("dropdownMenu"),dropdownIcon=document.querySelector(".dropdown-icon");dropdownButton.addEventListener("click",function(){dropdownMenu.classList.toggle("show"),dropdownButton.parentElement.classList.toggle("open")}),dropdownMenu.querySelectorAll("li").forEach(e=>{e.addEventListener("click",function(){dropdownButton.textContent=e.textContent+" ",dropdownButton.appendChild(dropdownIcon),dropdownMenu.classList.remove("show"),dropdownButton.parentElement.classList.remove("open");const t=e.getAttribute("data-value");console.log("Selected Language:",t)})}),document.addEventListener("click",function(e){!dropdownButton.contains(e.target)&&!dropdownMenu.contains(e.target)&&(dropdownMenu.classList.remove("show"),dropdownButton.parentElement.classList.remove("open"))})</script><style>.dropdown{display:inline-block;margin:0}.dropdown-menu{background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:0;margin:0;display:none}.dropdown-menu.show{display:block}.dropdown-menu li{padding:.2rem;cursor:pointer;color:#333}.dropdown-menu>li:hover{background-color:transparent}.selected-language:hover{color:#0042da}</style></div></nav></div></header><style>.language-selector{position:relative;display:inline-block;z-index:10}.language-selector .dropdown-menu{display:none;position:absolute;top:100%;right:0;background-color:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 4px 8px rgba(0,0,0,.1);z-index:50}.language-selector:hover .dropdown-menu{display:block}.header-menu:hover{color:#0042da}header{position:fixed;top:0;left:0;right:0;z-index:50;width:100vw;text-align:center;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);background:rgba(255,255,255,.5);box-shadow:0 4px 30px rgba(0,0,0,.1)}.header-menu:hover{color:#0042da}</style><div class="relative flex justify-start max-w-[90vw] px-8"><main class="min-h-[calc(100vh-5rem)] py-12 prose prose-neutral flex-1 dark:prose-invert text-left"><article class=text-left><div class="mb-14 mt-8"><h1 class="!my-0 pb-2.5">Quartz 教程</h1><div class="text-xs antialiased opacity-60"><time>2024年2月29日</time></div><span class="text-md antialiased opacity-60"><a href=https://caoyang2002.xyz/tags/%E7%BC%96%E7%A8%8B class="mb-2 ltr:mr-1.5 rtl:ml-1.5 px-3 py-1 rounded-lg no-underline bg-black/[3%] hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]">编程
</a><a href=https://caoyang2002.xyz/tags/quartz class="mb-2 ltr:mr-1.5 rtl:ml-1.5 px-3 py-1 rounded-lg no-underline bg-black/[3%] hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]">quartz</a></span></div><section><blockquote><p><a href=https://quartz.jzhao.xyz target=_blank rel="noopener noreferrer" class=external-link>原作者
<span class=external-icon>↗</span>
</a><a href=https://www.chyraw.com target=_blank rel="noopener noreferrer" class=external-link>个人配置
<span class=external-icon>↗</span></a></p></blockquote><h1 id=下载>下载</h1><div><pre><code class=language-bash data-lang=bash>git clone https://github.com/caoyang2002/quartz-obsidian-webside.git
cd quartz-obsidian-webside
npm i
npx quartz build --serve</code></pre></div><h1 id=配置>配置</h1><h2 id=布局>布局</h2><p>某些 emitters 可能还会输出HTML文件。为了方便定制，这些 emitters 允许您完全重新排列页面的布局。
默认页面布局可以在 <code>quartz.layout.ts</code> 中找到。</p><p>每个页面由多个不同的部分组成，这些部分包含 <code>QuartzComponents</code>。以下代码片段列出了您可以向其中添加组件的所有有效部分：</p><p><code>quartz/cfg.ts</code></p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export interface FullPageLayout {
  head: QuartzComponent // 单个组件
  header: QuartzComponent[] // 水平布局
  beforeBody: QuartzComponent[] // 垂直布局
  pageBody: QuartzComponent // 单个组件
  left: QuartzComponent[] // 桌面上垂直布局，在移动设备上水平布局
  right: QuartzComponent[] // 桌面上垂直布局，在移动设备上水平布局
  footer: QuartzComponent // 单个组件
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>这些对应于页面的以下部分：</p><p><img src=https://www.caoyang2002.top/usr/uploads/2024/04/2344105805.png alt></p><p>注意
还有两个未在上图中显示的附加布局字段。</p><p><code>head</code> 是一个单独的组件，用于在HTML中呈现<code>&lt;head></code>标签。这在页面上不会可见，只负责文档的元数据，如标签标题、脚本和样式。
<code>header</code> 是一组以水平方式布局的组件，出现在beforeBody部分之前。这使您可以复制旧的Quartz 3标题栏，其中包含标题、搜索栏和暗模式切换。默认情况下，Quartz 4不在标题中放置任何组件。</p><p><code>Quartz</code> 组件，就像插件一样，可以接受额外的属性作为配置选项。如果您熟悉React术语，可以将它们视为Higher-order Components。</p><p>查看所有可用组件以及其配置选项的列表。如果您有兴趣进一步定制Quartz的行为，请查看创建组件的指南。</p><h2 id=样式>样式</h2><p>大多数有意义的样式更改，如颜色方案和字体，都可以通过常规配置选项简单完成。但是，如果您想进行更复杂的样式更改，可以通过编写自己的样式来实现。与Quartz 3一样，Quartz 4也使用Sass进行样式设计。</p><p>您可以在 <code>quartz/styles/base.scss</code> 中查看基本样式表，并在 <code>quartz/styles/custom.scss</code> 中编写自己的样式。</p><p>注意
某些组件可能还提供自己的样式！例如，<code>quartz/components/Darkmode.tsx从quartz/components/styles/darkmode.scss</code> 导入样式。如果您想为特定组件定制样式，请仔细检查组件定义，以查看其样式是如何定义的。</p><h1 id=创建自己的quartz组件>创建自己的Quartz组件</h1><p><a href=https://quartz.jzhao.xyz/advanced/creating-components target=_blank rel="noopener noreferrer" class=external-link>原文
<span class=external-icon>↗</span></a></p><blockquote><p>警告
本指南假设您具有编写JavaScript的经验并熟悉TypeScript。</p></blockquote><p>通常在网络上，我们使用HTML编写布局代码，看起来像下面这样：</p><div><pre><code class=language-html data-lang=html>&lt;article&gt;
  &lt;h1&gt;文章标题&lt;/h1&gt;
  &lt;p&gt;一些内容&lt;/p&gt;
&lt;/article&gt;</code></pre></div><p>这段HTML表示一篇文章，具有领先的标题“文章标题”和一个包含文本“一些内容”的段落。这与CSS结合在一起来为页面添加样式，使用JavaScript添加交互。</p><p>但是，HTML不允许您创建可重用的模板。如果您想创建一个新页面，您需要复制并粘贴上述代码片段，并自行编辑标题和内容。如果我们的网站上有很多内容共享相似的布局，那么这并不理想。创建React的聪明人也有类似的抱怨，并发明了组件的概念——返回JSX的JavaScript函数——来解决代码重复的问题。</p><p>实际上，组件允许您编写一个JavaScript函数，该函数接受一些数据并生成HTML作为输出。虽然Quartz不使用React，但它使用相同的组件概念，以便您可以轻松地在Quartz网站中表达布局模板。</p><h2 id=示例组件>示例组件</h2><h3 id=构造函数>构造函数</h3><p>组件文件是以 .tsx 文件编写的，位于 <code>quartz/components</code> 文件夹中。这些文件被重新导出到 <code>quartz/components/index.ts</code> 中，以便您可以更轻松地在布局和其他组件中使用它们。</p><p>每个组件文件应该有一个默认导出，满足 <code>QuartzComponentConstructor</code> 函数签名。它是一个接受一个可选参数 <code>opts</code> 并返回一个 Quartz 组件的函数。参数 opts 的类型由您作为组件创建者决定的 <code>Options</code> 接口定义。</p><p>在您的组件中，您可以使用配置选项中的值来更改组件内的渲染行为。例如，下面代码片段中的组件如果 <code>favouriteNumber</code> 选项小于 0，则不会呈现。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>interface Options {
  favouriteNumber: number
}

const defaultOptions: Options = {
  favouriteNumber: 42,
}

export default ((userOpts?: Options) =&gt; {
  const opts = { ...userOpts, ...defaultOpts }
  function YourComponent(props: QuartzComponentProps) {
    if (opts.favouriteNumber &lt; 0) {
      return null
    }

    return &lt;p&gt;我的最喜欢的数字是 {opts.favouriteNumber}&lt;/p&gt;
  }

  return YourComponent
}) 满足 QuartzComponentConstructor</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><h2 id=属性>属性</h2><p>Quartz 组件本身（上面高亮的第 11-17 行）看起来像一个React组件。它接受属性（有时称为 props）并返回JSX。</p><p>所有Quartz组件接受相同的一组属性：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>// 简化以便演示
export type QuartzComponentProps = {
  fileData: QuartzPluginData
  cfg: GlobalConfiguration
  tree: Node&lt;QuartzPluginData&gt;
  allFiles: QuartzPluginData[]
  displayClass?: &#34;mobile-only&#34; | &#34;desktop-only&#34;
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><ul><li><code>fileData</code> : 可能已添加到当前页面的任何元数据插件。</li><li><code>fileData.slug</code> : 当前页面的 slug。</li><li><code>fileData.frontmatter</code> : 解析的任何 frontmatter。</li><li><code>cfg</code> : quartz.config.ts 中的配置字段。</li><li><code>tree</code> : 处理和转换文件后的结果HTML AST。如果您想使用 <code>hast-util-to-jsx-runtime</code> 渲染内容，这将非常有用（您可以在 <code>quartz/components/pages/Content.tsx</code> 中找到此示例）。</li><li><code>allFiles</code> : 已解析的所有文件的元数据。用于执行页面列表或确定整体站点结构非常有用。</li><li><code>displayClass</code> : 指示用户如何在移动设备或桌面环境中渲染它的首选项的实用类。如果要在移动设备或桌面环境中有条件地隐藏组件，则很有帮助。</li></ul><h2 id=样式-1>样式</h2><p>Quartz 组件还可以在实际函数组件上定义 <code>.css</code> 属性，Quartz 将对其进行捕获。这预期是一个 CSS 字符串，可以是内联的也可以是从 <code>.scss</code> 文件导入的。</p><p>请注意，内联样式必须是纯粹的普通 CSS：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export default (() =&gt; {
  function YourComponent() {
    return &lt;p class=&#34;red-text&#34;&gt;示例组件&lt;/p&gt;
  }

  YourComponent.css = `
  p.red-text {
    color: red;
  }
  `

  return YourComponent
}) 满足 QuartzComponentConstructor</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>但是，导入的样式可以来自 SCSS 文件：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>// 假设您的样式表位于 quartz/components/styles/YourComponent.scss
import styles from &#34;./styles

/YourComponent.scss&#34;

export default (() =&gt; {
  function YourComponent() {
    return &lt;p&gt;示例组件&lt;/p&gt;
  }

  YourComponent.css = styles
  return YourComponent
}) 满足 QuartzComponentConstructor</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>警告
Quartz 不使用 CSS 模块，因此在此处声明的任何样式都是全局的。如果您只希望它应用于您的组件，请确保使用特定的类名和选择器。</p><p>脚本和交互性</p><p>那么交互性呢？假设您想添加一个点击处理程序，例如。与组件上的 <code>.css</code> 属性一样，您还可以声明 <code>.beforeDOMLoaded</code> 和 <code>.afterDOMLoaded</code> 属性，这些属性是包含脚本的字符串。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export default (() =&gt; {
  function YourComponent() {
    return &lt;button id=&#34;btn&#34;&gt;点击我&lt;/button&gt;
  }

  YourComponent.beforeDOM = `
  console.log(&#34;hello from before the page loads!&#34;)
  `

  YourComponent.afterDOM = `
  document.getElementById(&#39;btn&#39;).onclick = () =&gt; {
    alert(&#39;button clicked!&#39;)
  }
  `
  return YourComponent
}) 满足 QuartzComponentConstructor</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>提示
对于那些来自React的人来说，Quartz 组件与React组件不同，因为它只使用JSX进行模板化和布局。像 <code>useEffect</code>、<code>useState</code> 等钩子不会被渲染，其他接受函数的属性如 <code>onClick</code> 处理程序也不起作用。相反，使用一个普通的 JS 脚本，直接修改 DOM 元素。</p><p>正如名称所暗示的那样，<code>.beforeDOMLoaded</code> 脚本在页面加载完成之前执行，因此它不能访问页面上的任何元素。这主要用于预取任何关键数据。</p><p><code>.afterDOMLoaded</code> 脚本在页面完全加载后执行。这是设置任何在站点访问期间应该持续存在的东西的好地方（例如，从本地存储中获取的内容）。</p><p>如果需要创建一个依赖于页面特定元素的 afterDOMLoaded 脚本，在导航到新页面时可能会更改，您可以监听 “nav” 事件。每当页面加载时都会触发该事件（如果启用了 SPA 路由，则可能会在导航时发生）。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>document.addEventListener(&#34;nav&#34;, () =&gt; {
  // 在这里执行页面特定的逻辑
  // 例如，附加事件监听器
  const toggleSwitch = document.querySelector(&#34;#switch&#34;) as HTMLInputElement
  toggleSwitch.addEventListener(&#34;change&#34;, switchTheme)
  window.addCleanup(() =&gt; toggleSwitch.removeEventListener(&#34;change&#34;, switchTheme))
})</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>最佳实践是通过 <code>window.addCleanup</code> 跟踪任何事件处理程序，以防止内存泄漏。这将在页面导航时调用。</p><h2 id=导入代码>导入代码</h2><p>当然，将代码作为字符串文字写入组件通常既不实际（也不受欢迎！）。</p><p>Quartz 支持通过 <code>.inline.ts</code> 文件导入组件代码。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>// @ts-ignore: typescript doesn&#39;t know about our inline bundling system
// 所以我们需要消除错误
import script from &#34;./scripts/graph.inline&#34;

export default (() =&gt; {
  function YourComponent() {
    return &lt;button id=&#34;btn&#34;&gt;点击我&lt;/button&gt;
  }

  YourComponent.afterDOM = script
  return YourComponent
}) 满足 QuartzComponentConstructor</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>// 在这里导入的任何内容都将被浏览器捆绑
import * as d3 from &#34;d3&#34;

document.getElementById(&#34;btn&#34;).onclick = () =&gt; {
  alert(&#34;按钮被点击了！&#34;)
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>此外，就像上面示例中所显示的一样，您可以在 <code>.inline.ts</code> 文件中导入包。这将由 Quartz 捆绑并包含在实际脚本中。</p><p>使用组件</p><p>创建自定义组件后，重新导出它在 <code>quartz/components/index.ts</code> ：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>import ArticleTitle from &#34;./ArticleTitle&#34;
import Content from &#34;./pages/Content&#34;
import Darkmode from &#34;./Darkmode&#34;
import YourComponent from &#34;./YourComponent&#34;

export { ArticleTitle, Content, Darkmode, YourComponent }</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>然后，您可以像在 <code>quartz.layout.ts</code> 中使用任何其他组件一样使用它。有关详细信息，请参见布局部分。</p><p>由于Quartz组件只是返回 <code>React</code> 组件的函数，因此您可以在其他 Quartz 组件中进行组合使用。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>import YourComponent from &#34;./YourComponent&#34;

export default (() =&gt; {
  function AnotherComponent(props: QuartzComponentProps) {
    return (
      &lt;div&gt;
        &lt;p&gt;它是嵌套的！&lt;/p&gt;
        &lt;YourComponent {...props} /&gt;
      &lt;/div&gt;
    )
  }

  return AnotherComponent
}) 满足 QuartzComponentConstructor</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>提示
在 <code>quartz/components</code> 中查找更多Quartz组件示例，作为您自己组件的参考！</p><h1 id=制作自己的插件>制作自己的插件</h1><p><a href=https://quartz.jzhao.xyz/advanced/making-plugins target=_blank rel="noopener noreferrer" class=external-link>原文
<span class=external-icon>↗</span></a></p><blockquote><p>警告
本文档的这一部分将假定您具有 TypeScript 的工作知识，并包含描述 Quartz 插件应该具有的接口的代码片段。</p></blockquote><p>Quartz 的插件是一系列针对内容的转换。下面是处理流水线的图示：</p><p><img src=https://www.caoyang2002.top/usr/uploads/2024/04/3880798031.png alt></p><p>所有插件都被定义为一个函数，该函数接受一个参数用于选项类型 <code>OptionType = object | undefined</code>，并返回一个与其所属类型相对应的对象。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>type OptionType = object | undefined
type QuartzPlugin&lt;Options extends OptionType = undefined&gt; = (opts?: Options) =&gt; QuartzPluginInstance
type QuartzPluginInstance =
  | QuartzTransformerPluginInstance
  | QuartzFilterPluginInstance
  | QuartzEmitterPluginInstance</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>接下来的几节将详细介绍每种插件类型可以实现的方法。在我们进行之前，让我们澄清一些更模糊的类型：</p><p><code>BuildCtx</code> 在 <code>quartz/ctx.ts</code> 中定义。它由以下组成：</p><p><code>argv</code> : 传递给 Quartz 构建命令的命令行参数
<code>cfg</code> : 完整的 Quartz 配置
<code>allSlugs</code> : 所有有效内容 <code>slug</code> 的列表（有关 <code>ServerSlug</code> 的更多信息，请参阅路径部分）
<code>StaticResources</code> 在 <code>quartz/resources.tsx</code> 中定义。它由以下组成：</p><p><code>css</code>: 应加载的样式表的 URL 列表
<code>js</code>: 应加载的脚本列表。脚本用 JSResource 类型描述，该类型也在 <code>quartz/resources.tsx</code> 中定义。它允许您定义加载时间（在 DOM 加载前或后），是否应为模块以及脚本的源 URL 或内联内容。</p><h2 id=转换器>转换器</h2><p>转换器对内容进行映射，接受一个 Markdown 文件，并输出修改后的内容或向文件本身添加元数据。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export type QuartzTransformerPluginInstance = {
  name: string
  textTransform?: (ctx: BuildCtx, src: string | Buffer) =&gt; string | Buffer
  markdownPlugins?: (ctx: BuildCtx) =&gt; PluggableList
  htmlPlugins?: (ctx: BuildCtx) =&gt; PluggableList
  externalResources?: (ctx: BuildCtx) =&gt; Partial&lt;StaticResources&gt;
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>所有转换器插件必须至少定义一个 name 字段以注册插件，并且一些可选函数，使您能够连接到转换单个 Markdown 文件的各个部分。</p><p><code>textTransform</code> 在将文件解析为 <code>Markdown AST</code> 之前执行文本到文本的转换。
<code>markdownPlugins</code> 定义一个 <code>remark</code> 插件列表。remark 是一个工具，以结构化方式将 <code>Markdown</code> 转换为 <code>Markdown</code>的工具。
<code>htmlPlugins</code> 定义一个 <code>rehype</code> 插件列表。与 <code>remark</code> 类似，<code>rehype</code> 是一个工具，以结构化方式将 HTML 转换为 HTML。
externalResources 定义插件可能需要在客户端加载的任何外部资源。
通常对于 remark 和 rehype，您可以找到现有的插件可供使用。如果您想创建自己的 remark 或 rehype 插件，请查看使用 unified（底层 AST 解析器和转换器库）的插件的指南。</p><p>从 <code>remark</code> 和 <code>rehype</code> 生态系统借鉴的转换器插件的一个很好的例子是 <code>Latex</code> 插件：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>quartz/plugins/transformers/latex.ts
import remarkMath from &#34;remark-math&#34;
import rehypeKatex from &#34;rehype-katex&#34;
import rehypeMathjax from &#34;rehype-mathjax/svg&#34;
import { QuartzTransformerPlugin } from &#34;../types&#34;

interface Options {
  renderEngine: &#34;katex&#34; | &#34;mathjax&#34;
}

export const Latex: QuartzTransformerPlugin&lt;Options&gt; = (opts?: Options) =&gt; {
  const engine = opts?.renderEngine ?? &#34;katex&#34;
  return {
    name: &#34;Latex&#34;,
    markdownPlugins() {
      return [remarkMath]
    },
    htmlPlugins() {
      if (engine === &#34;katex&#34;) {
        // 如果您需要将选项传递给插件，您可以使用 [插件，选项] 的元组
        return [[rehypeKatex, { output: &#34;html&#34; }]]
      } else {
        return [rehypeMathjax]
      }
    },
    externalResources() {
      if (engine === &#34;katex&#34;) {
        return {
          css: [
            // 基础 CSS
            &#34;https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css&#34;,
          ],
          js: [
            {
              // 修复复制行为：https://github.com/KaTeX/KaTeX/blob/main/contrib/copy-tex/README.md
              src: &#34;https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/copy-tex.min.js&#34;,
              loadTime: &#34;afterDOMReady&#34;,
              contentType: &#34;external&#34;,
            },
          ],
        }
      } else {
        return {}
      }
    },
  }
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><h2 id=转换器-1>转换器</h2><p>插件还经常做的一件事是解析文件并为该文件添加额外数据：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export const AddWordCount: QuartzTransformerPlugin = () =&gt; {
  return {
    name: &#34;AddWordCount&#34;,
    markdownPlugins() {
      return [
        () =&gt; {
          return (tree, file) =&gt; {
            // tree 是一个 `mdast` 根元素
            // file 是一个 `vfile`
            const text = file.value
            const words = text.split(&#34; &#34;).length
            file.data.wordcount = words
          }
        },
      ]
    },
  }
}

// 告诉 TypeScript 关于我们正在添加的自定义数据字段
// 其他插件也将意识到这个数据字段
declare module &#34;vfile&#34; {
  interface DataMap {
    wordcount: number
  }
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>最后，您还可以使用 <code>unist-util-visit</code> 包中的 <code>visit</code> 函数或 <code>mdast-util-find-and-replace</code> 包中的 <code>findAndReplace</code> 函数对 <code>Markdown</code> 或 <code>HTML AST</code> 进行转换。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export const TextTransforms: QuartzTransformerPlugin = () =&gt; {
  return {
    name: &#34;TextTransforms&#34;,
    markdownPlugins() {
      return [() =&gt; {
        return (tree, file) =&gt; {
          // 使用斜体版本替换 _text_
          findAndReplace(tree, /_(.&#43;)_/, (_value: string, ...capture: string[]) =&gt; {
            // inner 是正则表达式括号内的文本
            const [inner] = capture
            // 返回一个 mdast 节点
            // https://github.com/syntax-tree/mdast
            return {
              type: &#34;emphasis&#34;,
              children: [{ type: &#39;text&#39;, value: inner }]
            }
          })

         // 删除所有链接（替换为仅链接内容）
         // 通过 mdast 节点上的 &#39;type&#39; 字段进行匹配
         // 例如在这个例子中的 https://github.com/syntax-tree/mdast#link
          visit(tree, &#34;link&#34;, (link: Link) =&gt; {
            return {
              type: &#34;paragraph&#34;
              children: [{ type: &#39;text&#39;, value: link.title }]
            }
          })
        }
      }]
    }
  }
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>所有转换器插件都可以在 <code>quartz/plugins/transformers</code> 下找到。如果您决定编写自己的转换器插件，请不要忘记在 <code>quartz/plugins/transformers/index.ts</code> 下重新导出它。</p><p>最后一句话：转换器插件相当复杂，所以如果您一开始不理解也不必担心。查看内置的转换器，了解它们如何在内容上操作，以更好地了解如何实现您想要做的事情。</p><h2 id=过滤器>过滤器</h2><p>过滤器用于过滤内容，接受所有转换器处理的输出，并确定实际要保留的文件以及要丢弃的文件。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export type QuartzFilterPlugin&lt;Options extends OptionType = undefined&gt; = (
  opts?: Options,
) =&gt; QuartzFilterPluginInstance

export type QuartzFilterPluginInstance = {
  name: string
  shouldPublish(ctx: BuildCtx, content: ProcessedContent): boolean
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>过滤器插件必须定义一个 <code>name</code> 字段和一个 <code>shouldPublish</code> 函数，该函数接受所有转换器处理的内容，并根据是否应将其传递给发射器插件返回 <code>true</code> 或 <code>false</code>。</p><p>例如，这是用于移除草稿的内置插件：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>quartz/plugins/filters/draft.ts
import { QuartzFilterPlugin } from &#34;../types&#34;

export const RemoveDrafts: QuartzFilterPlugin&lt;{}&gt; = () =&gt; ({
  name: &#34;RemoveDrafts&#34;,
  shouldPublish(_ctx, [_tree, vfile]) {
    // 使用从转换器解析的 frontmatter
    const draftFlag: boolean = vfile.data?.frontmatter?.draft ?? false
    return !draftFlag
  },
})</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><h2 id=发射器>发射器</h2><p>发射器用于在内容的所有转换和过滤输出上进行缩减，并创建输出文件。</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export type QuartzEmitterPlugin&lt;Options extends OptionType = undefined&gt; = (
  opts?: Options,
) =&gt; QuartzEmitterPluginInstance

export type QuartzEmitterPluginInstance = {
  name: string
  emit(ctx: BuildCtx, content: ProcessedContent[], resources: StaticResources): Promise&lt;FilePath[]&gt;
  getQuartzComponents(ctx: BuildCtx): QuartzComponent[]
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>发射器插件必须定义一个 <code>name</code> 字段、一个 <code>emit</code> 函数和一个 <code>getQuartzComponents</code> 函数。<code>emit</code> 负责查看所有解析和过滤的内容，然后适当创建文件并返回插件创建的文件路径列表。</p><p>创建新文件可以通过常规的 <code>Node fs</code> 模块（例如 <code>fs.cp</code> 或 <code>fs.writeFile</code>）或者通过 <code>quartz/plugins/emitters/helpers.ts</code> 中的 <code>write</code> 函数进行，如果您正在创建包含文本的文件。<code>write</code> 具有以下签名：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>export type WriteOptions = (data: {
  // 构建上下文
  ctx: BuildCtx
  // 要发出的文件的名称（不包括文件扩展名）
  slug: ServerSlug
  // 文件扩展名
  ext: `.${string}` | &#34;&#34;
  // 要添加的文件内容
  content: string
}) =&gt; Promise&lt;FilePath&gt;</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>这是对向适当的输出文件夹写入并确保中间目录存在的简单包装。如果选择使用本机 Node fs API，请确保发出到 <code>argv.output</code> 文件夹。</p><p>如果您正在创建需要渲染组件的发射器插件，还有三件事需要注意：</p><p>您的组件应该使用 <code>getQuartzComponents</code> 声明一个 <code>QuartzComponents</code> 列表，用于构造页面。有关更多信息，请参阅创建组件页面。
您可以使用 <code>quartz/components/renderPage.tsx</code> 中定义的 <code>renderPage</code> 函数将 <code>Quartz</code> 组件呈现为 <code>HTML</code>。
如果需要将 HTML AST 渲染为 JSX，可以使用 <code>quartz/util/jsx.ts</code> 中的 <code>htmlToJsx</code> 函数。您可以在 <code>quartz/components/pages/Content.tsx</code> 中找到一个示例。</p><p>例如，以下是一个简化版本的内容页面插件，它呈现每个页面：</p><div class=code-playground data-language=typescript><div><pre>
                <code class=language-typescript>quartz/plugins/emitters/contentPage.tsx
export const ContentPage: QuartzEmitterPlugin = () =&gt; {
  // 构造布局
  const layout: FullPageLayout = {
    ...sharedPageComponents,
    ...defaultContentPageLayout,
    pageBody: Content(),
  }


 const { head, header, beforeBody, pageBody, left, right, footer } = layout
  return {
    name: &#34;ContentPage&#34;,
    getQuartzComponents() {
      return [head, ...header, ...beforeBody, pageBody, ...left, ...right, footer]
    },
    async emit(ctx, content, resources, emit): Promise&lt;FilePath[]&gt; {
      const cfg = ctx.cfg.configuration
      const fps: FilePath[] = []
      const allFiles = content.map((c) =&gt; c[1].data)
      for (const [tree, file] of content) {
        const slug = canonicalizeServer(file.data.slug!)
        const externalResources = pageResources(slug, resources)
        const componentData: QuartzComponentProps = {
          fileData: file.data,
          externalResources,
          cfg,
          children: [],
          tree,
          allFiles,
        }

        const content = renderPage(cfg, slug, componentData, opts, externalResources)
        const fp = await emit({
          content,
          slug: file.data.slug!,
          ext: &#34;.html&#34;,
        })

        fps.push(fp)
      }
      return fps
    },
  }
}</code></pre></div><div class=controls><button class=run-button>
<span style=display:flex;align-items:center;gap:4px>运行<svg t="1737473351499" class="icon" viewBox="0 0 1024 1024" p-id="11262" width="16" height="16"><path d="M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96zm0 768c-194.08.0-352-157.92-352-352S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z" p-id="11263"/><path d="M466.816 324.96A32 32 0 00416 350.848v339.776a32 32 0 0050.816 25.856l233.6-169.888a32 32 0 000-51.776l-233.6-169.856z" p-id="11264"/></svg></span></button></div><div class=output style=display:none><pre class=output-content></pre></div></div><p>请注意，它以 <code>FullPageLayout</code> 作为选项。它由共享布局和页面布局组合而成，这两个布局都是通过 <code>quartz.layout.ts</code> 文件提供的。</p><p>提示
在 Quartz 中查看 <code>quartz/plugins</code> 下更多插件的示例，作为您自己插件的参考！</p><h1 id=国际化>国际化</h1><p><a href=https://quartz.jzhao.xyz/features/i18n target=_blank rel="noopener noreferrer" class=external-link>原文
<span class=external-icon>↗</span></a></p><p>国际化允许用户将Quartz界面中的文本翻译成各种支持的语言，而无需进行大量的代码更改。这可以通过 <code>quartz.config.ts</code> 中的 locale 配置字段进行更改。</p><p><code>locale</code> 字段通常遵循一定的格式：<code>{language}-{REGION}</code></p><p><code>{language}</code> 通常是一个由两个小写字母组成的语言代码。
<code>{REGION}</code> 通常是一个由两个大写字母组成的地区代码。
有兴趣贡献吗？
我们欢迎翻译的 Pull Request！要贡献翻译，请执行以下操作：</p><p>在 <code>quartz/i18n/locales</code> 文件夹中，复制 <code>en-US.ts</code> 文件。
将其重命名为 <code>{language}-{REGION}.ts</code>，使其与上述格式的语言环境匹配。
填写翻译！
在 <code>quartz/i18n/index.ts</code> 中的 <code>TRANSLATIONS</code> 下添加条目。</p><h1 id=设置你的-github-仓库>设置你的 GitHub 仓库</h1><p><a href=https://quartz.jzhao.xyz/setting-up-your-GitHub-repository target=_blank rel="noopener noreferrer" class=external-link>原文
<span class=external-icon>↗</span></a></p><p>首先，确保你已经在本地克隆并设置了 Quartz。</p><p>然后，在 GitHub.com 上创建一个新的仓库。不要初始化新仓库，也不要添加 README、许可证或 gitignore 文件。</p><p>在 <code>GitHub.com</code> 仓库的“快速设置”页面顶部，单击剪贴板图标以复制远程仓库的 URL。</p><p>在你选择的终端中，导航到你的 Quartz 文件夹的根目录。然后，运行以下命令，将 <code>REMOTE-URL</code> 替换为你刚刚从上一步复制的 URL。</p><p>列出所有被跟踪的仓库</p><div><pre><code class=language-bash data-lang=bash>git remote -v</code></pre></div><p>如果 origin 不匹配你自己的仓库，将你的仓库设置为 origin</p><div><pre><code class=language-bash data-lang=bash>git remote set-url origin REMOTE-URL</code></pre></div><p>如果你没有将上游设置为远程仓库，添加它以便更新工作</p><div><pre><code class=language-bash data-lang=bash>git remote add upstream https://github.com/jackyzha0/quartz.git</code></pre></div><p>然后，你可以同步内容以将其上传到你的仓库。这是一个辅助命令，将会将你的内容初始推送到你的仓库。</p><div><pre><code class=language-bash data-lang=bash>npx quartz sync --no-pull</code></pre></div><p>致命错误：<code>--[no-]autostash</code> 选项只能在 <code>--rebase</code> 时有效。</p><p>你可能使用的是过时版本的 git。更新 git 应该会解决这个问题。</p><p>在以后的更新中，每当你想要 <code>将更新推送到你的仓库</code> 时，你只需要运行 <code>npx quartz sync</code>。</p><h2 id=标志和选项>标志和选项</h2><p>要获取完整的帮助选项，你可以运行 <code>npx quartz sync --help</code>。</p><p>大多数情况下，它们都有合理的默认值，但如果你有自定义设置，你可以覆盖它们：</p><p><code>-d</code> 或 <code>--directory</code> ：内容文件夹。通常只是 content。
<code>-v</code> 或 <code>--verbose</code> ：打印额外的日志信息
<code>--commit</code> 或 <code>--no-commit</code> ：是否为你的更改进行 git 提交
<code>--push</code> 或 <code>--no-push</code>：是否将更新推送到你的 Quartz GitHub fork
<code>--pull</code> 或 <code>--no-pull</code> ：是否在推送之前尝试拉取来自你的 GitHub fork 的任何更新（即来自其他设备的更新）</p><h1 id=编写内容>编写内容</h1><p><a href=https://quartz.jzhao.xyz/authoring-content target=_blank rel="noopener noreferrer" class=external-link>原文
<span class=external-icon>↗</span></a></p><p>你的 Quartz 中的所有内容都应该放在 <code>/content</code> 文件夹中。Quartz 的主页内容位于 <code>content/index.md</code>。如果你已经设置了 Quartz，那么这个文件夹应该已经被初始化了。这个文件夹中的任何 Markdown 文件都将由 Quartz 处理。</p><p>推荐你使用 Obsidian 来编辑和维护你的 Quartz。它带有一个漂亮的编辑器和图形界面，可以预览、编辑和链接你的本地文件和附件。</p><p>一切都设置好了吗？让我们本地构建和预览你的 Quartz！</p><h2 id=语法>语法</h2><p>由于 Quartz 使用 Markdown 文件作为编写内容的主要方式，因此它完全支持 Markdown 语法。默认情况下，Quartz 还附带了一些语法扩展，如 <code>Github Flavored Markdown</code>（脚注、删除线、表格、任务列表）和 Obsidian Flavored Markdown（标注、Wiki 链接）。</p><p>以下是 GitHub Flavored Markdown 的全部功能和语法：</p><ol><li><p><strong>任务列表（Task Lists）</strong>：使用 <code>- [ ]</code> 和 <code>- [x]</code> 语法创建待办事项列表，可以勾选或取消勾选每个项目。</p></li><li><p><strong>表格（Tables）</strong>：使用管道符 <code>|</code> 和连字符 <code>-</code> 创建简单的表格，包括行和列。</p></li><li><p><strong>删除线（Strikethrough）</strong>：使用双波浪线 <code>~~</code> 表示删除的文本。</p></li><li><p><strong>自动链接（Autolinks）</strong>：GitHub Flavored Markdown 会自动将 URL 和电子邮件地址转换为链接。</p></li><li><p><strong>标记语法（Disallowed Raw HTML）</strong>：GitHub Flavored Markdown 不允许使用原始 HTML 标记，以确保安全性。</p></li><li><p><strong>脚注（Footnotes）</strong>：使用 <code>[^]</code> 语法创建文本注释，通常在页面底部显示。</p></li></ol><p>Obsidian Flavored Markdown（OFM）提供了以下功能和语法：</p><ol><li><p><strong>呼唤（Callouts）</strong>：允许在文本中添加特殊样式的注释，以突出显示关键信息或提醒。</p></li><li><p><strong>内部链接（Wikilinks）</strong>：可以使用双括号 <code>[[</code> 和 <code>]]</code> 来创建内部链接，链接到其他笔记或文件。</p></li><li><p><strong>时间戳链接（Timestamp Links）</strong>：可以使用 <code>[[YYYY-MM-DD]]</code> 的格式创建时间戳链接，链接到特定日期的笔记。</p></li><li><p><strong>标签链接（Tag Links）</strong>：可以使用 <code>#[tag]</code> 的格式创建标签链接，链接到具有相同标签的笔记。</p></li></ol><p>这些特性使得 Obsidian 用户可以更方便地创建交互式笔记，并在笔记之间建立丰富的关联。</p><p>此外，Quartz 还允许你在笔记中指定额外的元数据，称为 frontmatter。</p><p><code>content/note.md</code></p><div><pre><code class=language-bash data-lang=bash>---
title: 示例标题
draft: false
tags:
  - 示例标签
---</code></pre></div><p>你的其余内容在这里。你可以在这里使用 <strong>Markdown</strong> :)
一些常见的 frontmatter 字段，Quartz 本身支持：</p><p>title: 页面标题。如果没有提供，Quartz 将使用文件名作为标题。
description: 页面描述，用于链接预览。
aliases: 此笔记的其他名称。这是一个字符串列表。
tags: 此笔记的标签。
draft: 是否发布页面。这是在 Quartz 中创建私密页面的一种方式。
date: 表示笔记发布日期的字符串。通常使用 YYYY-MM-DD 格式。
同步你的内容</p><p>当你对 Quartz 满意时，你可以将更改保存到 GitHub。首先确保你已经设置了 GitHub 仓库，然后运行 <code>npx quartz sync</code>。</p><p>自定义</p><p>标题、标签、别名和 <code>cssclasses</code> 的 <code>frontmatter</code> 解析是 <code>Frontmatter</code> 插件的功能，日期由 <code>CreatedModifiedDate</code> 插件处理，描述由 <code>Description</code> 插件处理。查看插件页面以获取自定义选项。</p><h1 id=配置-1>配置</h1><p><a href=https://quartz.jzhao.xyz/configuration target=_blank rel="noopener noreferrer" class=external-link>原文
<span class=external-icon>↗</span></a></p><p>Quartz旨在非常可配置，即使您不懂编程也可以进行大多数配置。您应该需要的大多数配置只需编辑quartz.config.ts或更改quartz.layout.ts即可。</p><blockquote><p>提示
如果您使用像VSCode这样具有TypeScript语言支持的文本编辑器来编辑Quartz配置，当您在配置中出现错误时，它会提醒您，帮助您避免配置错误！</p></blockquote><p>Quartz的配置可以分为两个主要部分：</p><p><code>quartz.config.ts</code></p><div><pre><code class=language-bash data-lang=bash>const config: QuartzConfig = {
  configuration: { ... },
  plugins: { ... },
}</code></pre></div><h2 id=通用配置>通用配置</h2><p>这部分配置涉及可能影响整个站点的任何内容。以下是您可以配置的所有内容的列表：</p><p><code>pageTitle</code>：站点标题。这也用于生成站点的RSS Feed时。
<code>enableSPA</code>：是否在站点上启用SPA路由。
<code>enablePopovers</code>：是否在站点上启用浮窗预览。
<code>analytics</code>：站点分析使用什么。值可以是
<code>null</code>：不使用分析；
<code>{ provider: 'google', tagId: '&lt;your-google-tag>' }</code> ：使用Google Analytics；
<code>{ provider: 'plausible' }</code>（托管）或<code>{ provider: 'plausible', host: '&lt;your-plausible-host>' }</code>（自托管）：使用Plausible；
<code>{ provider: 'umami', host: '&lt;your-umami-host>', websiteId: '&lt;your-umami-website-id>' }</code> ：使用Umami；
<code>{ provider: 'goatcounter', websiteId: 'my-goatcounter-id' }</code>（托管）或<code>{ provider: 'goatcounter', websiteId: 'my-goatcounter-id', host: 'my-goatcounter-domain.com', scriptSrc: 'https://my-url.to/counter.js' }</code>（自托管）：使用GoatCounter。
<code>locale</code> ：用于国际化和日期格式化。
<code>baseUrl</code> ：这用于需要绝对URL的站点地图和 RSS feeds，以了解站点的规范‘home’位于何处。这通常是站点的部署URL（例如，对于此站点，quartz.jzhao.xyz）。不包括协议（即<code>https://</code>）或任何前导或尾随斜杠。
如果您在 GitHub 页面上没有自定义域名的情况下托管，则此还应包括子路径。例如，如果我的存储库是 jackyzha0/quartz，则GitHub页面将部署到 <code>https://jackyzha0.github.io/quartz</code>，并且 <code>baseUrl</code> 将是 <code>jackyzha0.github.io/quartz</code>。
请注意，Quartz 4将尽可能避免使用此功能，并且在任何情况下都可以使用相对URL以确保您的站点正常工作。
<code>ignorePatterns</code> ：Quartz应忽略并在查找内容文件夹中查找文件时不应搜索的一组glob模式。有关更多详细信息，请参见私有页面。
<code>defaultDateType </code>：默认要在页面和页面列表上显示的日期是使用created、modified 还是 published。
<code>theme</code> ：配置站点外观。
<code>cdnCaching</code> ：如果为true（默认值），则使用Google CDN缓存字体。这通常会更快。如果要使Quartz下载字体以便自包含，请禁用（false）它。
<code>typography</code> ：要使用的字体。Google字体中的任何字体都可以在这里使用。
<code>header</code> ：标题使用的字体
<code>code</code> ：内联和块引用的字体。
<code>body</code> ：所有内容的字体
<code>colors</code> ：控制站点的主题。
<code>light</code> ：页面背景
<code>lightgray</code> ：边框
<code>gray</code> ：图链接，更重的边框
<code>darkgray</code> ：正文文本
<code>dark</code> ：标题文本和图标
<code>secondary</code> ：链接颜色，当前图节点
<code>tertiary</code> ：悬停状态和已访问的图节点
<code>highlight</code> ：内部链接背景，突出显示的文本，代码行
插件</p><p>您可以将Quartz插件视为内容上的一系列转换。</p><p><code>quartz.config.ts</code></p><div><pre><code class=language-bash data-lang=bash>plugins: {
  transformers: [...],
  filters: [...],
  emitters: [...],
}</code></pre></div><p>变换器（transformers）对内容进行映射（例如，解析frontmatter、生成描述）
过滤器（filters）过滤内容（例如，过滤掉草稿）
发射器（emitters）在内容上减少（例如，创建RSS Feed或列出所有具有特定标签的文件的页面）
您可以通过在transformers、filters和emitters字段中添加、删除和重新排序插件来自定义Quartz的行为。</p><p>注意
每个节点都按顺序由每个变换器修改。某些转换器是位置敏感的，因此您可能需要特别注意它们是在哪些其他插件之前还是之后。</p><p>您应该小心将插件添加到与其插件类型相对应的正确条目中。例如，要添加ExplicitPublish插件（一个过滤器），您将添加以下行：</p><p><code>quartz.config.ts</code></p><div><pre><code class=language-bash data-lang=bash>filters: [
  ...
  Plugin.ExplicitPublish(),
  ...
],</code></pre></div><p>要删除插件，应从 <code>quartz.config.ts</code> 中删除它的所有出现。</p><p>要进一步自定义插件，一些插件还可能具有自己的配置设置，您可以传递给它们。如果您没有传递配置，则插件将使用其默认设置。</p><p>例如，<code>Latex</code> 插件允许您传递一个字段，指定 <code>renderEngine</code> 以在 <code>Katex</code> 和 <code>MathJax</code> 之间进行选择。</p><p><code>quartz.config.ts</code></p><div><pre><code class=language-bash data-lang=bash>transformers: [
  Plugin.FrontMatter(), // 使用默认选项
  Plugin.Latex({ renderEngine: &#34;katex&#34; }), // 设置一些自定义选项
]</code></pre></div><p>某些插件默认包含在 <code>quartz.config.ts</code> 中，但还有更多可用。</p><p>您可以在此处查看所有插件及其配置选项的列表。</p><p>如果您想制作自己的插件，请参阅制作自定义插件指南。</p><h1 id=语法高亮>语法高亮</h1><p><a href=https://quartz.jzhao.xyz/plugins/SyntaxHighlighting target=_blank rel="noopener noreferrer" class=external-link>原文
<span class=external-icon>↗</span></a></p><h2 id=插件变换器>插件/变换器</h2><p>此插件用于在Quartz中的代码块中添加语法高亮。有关更多信息，请参见语法高亮。</p><p>注意
有关如何添加、删除或配置插件的信息，请参阅配置页面。</p><p>此插件接受以下配置选项：</p><p><code>theme</code>：Shikiji 捆绑的主题之一的单独 ID。一个用于浅色模式，一个用于深色模式。默认为 <code>theme: { light: "github-light", dark: "github-dark" }</code>。
<code>keepBackground</code>：如果设置为 <code>true</code>，则将使用 Shikiji 主题的背景。如果为 <code>false</code>（默认值），则将改用 Quartz 主题颜色作为背景。
此外，您还可以在 <code>quartz/styles/syntax.scss</code> 文件中进一步覆盖颜色。</p><p>API</p><p>类别：变换器
函数名称：Plugin.SyntaxHighlighting()。
来源：quartz/plugins/transformers/syntax.ts</p><h1 id=spa-路由>SPA 路由</h1><p><a href=https://quartz.jzhao.xyz/features/SPA-Routing target=_blank rel="noopener noreferrer" class=external-link>原文
<span class=external-icon>↗</span></a></p><p>单页面应用程序风格的渲染。这可以防止出现未经样式化的内容闪烁，并提高了 Quartz 的流畅度。</p><p>在底层，这是通过劫持页面导航来完成的，而不是直接通过 GET 请求获取 HTML ，然后使用 micromorph 进行差异化和选择性地替换页面的部分。这使我们能够在不完全刷新页面的情况下更改页面的内容，减少浏览器需要加载的内容量。</p><h2 id=配置-2>配置</h2><p>禁用SPA路由：将 <code>quartz.config.ts</code> 中配置的 <code>enableSPA</code> 字段设置为 <code>false</code>。</p></section><nav class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"><a class="ltr:pr-3 rtl:pl-3" href=https://caoyang2002.xyz/post/2024/03/xiaomi_router/><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>小米路由器</span></a>
<a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href=https://caoyang2002.xyz/post/2023/11/c_book/><span>C 语言推荐书籍</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a></nav><div class="mt-24 w-100rem" id=disqus_thread></div><script>const disqusShortname="caoyang2002.xyz",script=document.createElement("script");script.src="https://"+disqusShortname+".disqus.com/embed.js",script.setAttribute("data-timestamp",+new Date),document.head.appendChild(script)</script><div class="giscus mt-24"></div><script src=https://giscus.app/client.js data-repo=caoyang2002/caoyang2002 data-repo-id=R_kgDONgnnzg data-category=Announcements data-category-id=DIC_kwDONgnnzs4ClayH data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><div class=ml-2><button class=mobile-toc-toggle><svg t="1737363365612" class="icon" viewBox="0 0 1024 1024" p-id="7154" width="32" height="32"><path d="M811.6 264.1H378.2c-19.8.0-36-16.2-36-36s16.2-36 36-36h433.5c19.8.0 36 16.2 36 36-.1 19.8-16.3 36-36.1 36zm0 258H378.2c-19.8.0-36-16.2-36-36s16.2-36 36-36h433.5c19.8.0 36 16.2 36 36-.1 19.8-16.3 36-36.1 36zm0 258H378.2c-19.8.0-36-16.2-36-36s16.2-36 36-36h433.5c19.8.0 36 16.2 36 36-.1 19.8-16.3 36-36.1 36z" fill="#223d60" p-id="7155"/><path d="M210.2 229m-37.9.0a37.9 37.9.0 1075.8.0 37.9 37.9.0 10-75.8.0z" fill="#223d60" p-id="7156"/><path d="M210.2 487m-37.9.0a37.9 37.9.0 1075.8.0 37.9 37.9.0 10-75.8.0z" fill="#223d60" p-id="7157"/><path d="M210.2 745m-37.9.0a37.9 37.9.0 1075.8.0 37.9 37.9.0 10-75.8.0z" fill="#223d60" p-id="7158"/></svg></button><aside class=toc-aside><div class=toc-container><div class=toc-header><h3 class=toc-title>目录</h3><button class=toc-close><svg viewBox="0 0 24 24" width="24" height="24"><path fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg></button></div><nav id=TableOfContents class=toc><nav id=TableOfContents><ul><li><a href=#下载>下载</a></li><li><a href=#配置>配置</a><ul><li><a href=#布局>布局</a></li><li><a href=#样式>样式</a></li></ul></li><li><a href=#创建自己的quartz组件>创建自己的Quartz组件</a><ul><li><a href=#示例组件>示例组件</a><ul><li><a href=#构造函数>构造函数</a></li></ul></li><li><a href=#属性>属性</a></li><li><a href=#样式-1>样式</a></li><li><a href=#导入代码>导入代码</a></li></ul></li><li><a href=#制作自己的插件>制作自己的插件</a><ul><li><a href=#转换器>转换器</a></li><li><a href=#转换器-1>转换器</a></li><li><a href=#过滤器>过滤器</a></li><li><a href=#发射器>发射器</a></li></ul></li><li><a href=#国际化>国际化</a></li><li><a href=#设置你的-github-仓库>设置你的 GitHub 仓库</a><ul><li><a href=#标志和选项>标志和选项</a></li></ul></li><li><a href=#编写内容>编写内容</a><ul><li><a href=#语法>语法</a></li></ul></li><li><a href=#配置-1>配置</a><ul><li><a href=#通用配置>通用配置</a></li></ul></li><li><a href=#语法高亮>语法高亮</a><ul><li><a href=#插件变换器>插件/变换器</a></li></ul></li><li><a href=#spa-路由>SPA 路由</a><ul><li><a href=#配置-2>配置</a></li></ul></li></ul></nav></nav></div></aside><style>.toc-aside{position:fixed;top:6rem;bottom:4rem;right:0;width:16rem;z-index:100;transition:transform .3s ease}.toc-container{background:#fff;height:100%;border-radius:.5rem .5rem .5rem .5rem;box-shadow:-2px 0 8px rgba(0,0,0,.1);display:flex;flex-direction:column}.toc-header{position:sticky;border-radius:.5rem .5rem 0 0;top:0;background:#fff;padding:1rem;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center;z-index:10}.toc-title{margin:0;font-size:1rem;font-weight:600}.mobile-toc-toggle{display:none;position:fixed;top:6rem;right:1rem;z-index:99;width:3rem;height:3rem;border-radius:50%;background:#fff;border:1px solid #e5e7eb;box-shadow:0 2px 8px rgba(0,0,0,.1);color:#4b5563;cursor:pointer;transition:all .2s}.mobile-toc-toggle:hover{background:#f3f4f6}.mobile-toc-toggle .menu-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.toc-close{padding:.5rem;background:0 0;border:none;color:--bg;cursor:pointer;transition:all .2s}.toc-close:hover{color:#111827}.toc{flex:1;overflow-y:auto;padding:1rem;scrollbar-gutter:stable}.toc ul{list-style:none;padding-left:1rem;margin:0}.toc li{margin:.5rem 0}.toc a{display:block;padding:.25rem .5rem;color:#4b5563;text-decoration:none;border-radius:.25rem;transition:all .2s}.toc a:hover{background-color:#f3f4f6;color:#111827}.toc a:active{background-color:#f3f4f6;color:#111827;font-weight:500}.toc::-webkit-scrollbar{width:4px}.toc::-webkit-scrollbar-track{background:0 0}.toc::-webkit-scrollbar-thumb{background-color:#d1d1d1;border-radius:4px}@media(max-width:912px){.mobile-toc-toggle{display:flex;justify-content:center;align-items:center}.toc-aside{transform:translateX(100%);width:80vw;max-width:20rem}.toc-aside.show{transform:translateX(0)}}h1,h2,h3,h4,h5,h6{scroll-margin-top:100px}</style><script>document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".toc-aside"),t=document.querySelector(".mobile-toc-toggle"),n=document.querySelector(".toc-close");t?.addEventListener("click",()=>{e?.classList.add("show")}),n?.addEventListener("click",()=>{e?.classList.remove("show")}),document.addEventListener("click",n=>{window.innerWidth<=912&&e?.classList.contains("show")&&!e.contains(n.target)&&!t?.contains(n.target)&&e.classList.remove("show")});const s=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target.getAttribute("id"),n=document.querySelector(`.toc a[href="#${t}"]`);e.intersectionRatio>0&&(document.querySelectorAll(".toc a.active").forEach(e=>{e.classList.remove("active")}),n?.classList.add("active"))})},{rootMargin:"-20% 0px -80% 0px"});document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]").forEach(e=>{s.observe(e)})})</script></div></div><footer class="flex items-center text-xs uppercase h-8"><div class="mr-auto opacity-60">&copy; 2025
<a class=link href=https://caoyang2002.xyz/>caoyang 2002</a></div><div><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><p class="link mx-6 opacity-60">本站访问
<span id=busuanzi_value_page_pv><i class="fa fa-spinner fa-spin"></i></span>
次</p></div><a class="link mx-6 opacity-60" href=https://gohugo.io/ rel=noopener target=_blank>powered by hugo️️</a>️
<a class="link mx-6 opacity-60" href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>hugo-paper</a>
<a class="link opacity-60" href=https://github.com/caoyang2002/hugo-focus rel=noopener target=_blank>hugo-focus</a></footer><style>footer{position:fixed;bottom:0;left:0;right:0;z-index:50;width:100%;padding:.5rem;padding-bottom:calc(.5rem + var(--safe-padding-bottom));padding-left:max(.5rem,var(--safe-padding-left));padding-right:max(.5rem,var(--safe-padding-right));display:flex;justify-content:center;align-items:center;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(12px);background:rgba(255,255,255,.85);border-top:1px solid rgba(255,255,255,.3);box-shadow:0 -4px 20px rgba(0,0,0,5%)}.dark footer{background:rgba(0,0,0,.85);border-top-color:rgba(255,255,255,.1)}.footer-content{width:100%;max-width:var(--w);margin:0 auto;padding:0 1rem;display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:1rem}.footer-element{padding:.75rem 1.5rem;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;opacity:.8;border-radius:.5rem;background:rgba(255,255,255,.1);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);transition:all .2s ease}.footer-element:hover{opacity:1;background:rgba(255,255,255,.2)}.dark .footer-element{background:rgba(255,255,255,5%)}.dark .footer-element:hover{background:rgba(255,255,255,.1)}@media(max-width:768px){footer{padding-top:.5rem;padding-bottom:calc(.5rem + env(safe-area-inset-bottom))}.footer-content{padding:0 .5rem;gap:.5rem}.footer-element{padding:.5rem 1rem;font-size:.75rem}}@media(min-width:768px){.footer-element{font-size:.875rem}}@media(min-width:1024px){.footer-content{padding:0 2rem;gap:2rem}.footer-element{padding:.75rem 2rem}}</style></body></html>